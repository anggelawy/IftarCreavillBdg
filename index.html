<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Iftar Ramadhan</title>

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">

    <!-- Preload Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.css"
        integrity="sha256-WAgYcAck1C1/zEl5sBl5cfyhxtLgKGdpI3oKyJffVRI=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha256-PI8n5gCcz9cQqQXm3PEtDuPG8qx9oFsFctPg0S5zb8g=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"
        integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
        integrity="sha256-GqiEX9BuR1rv5zPU5Vs2qS/NSHl1BJyBcjQYJ6ycwD4=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha256-CDOy6cOibCWEdsRiZuaHf8dSGGJRYuBGC+mjoJimHGw=" crossorigin="anonymous" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"
        integrity="sha256-pQBbLkFHcP1cy0C8IhoSdxlm0CtcH5yJ2ki9jjgR03c=" crossorigin="anonymous" as="script">

    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap">

    <!-- Dependencies CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.css"
        integrity="sha256-WAgYcAck1C1/zEl5sBl5cfyhxtLgKGdpI3oKyJffVRI=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha256-PI8n5gCcz9cQqQXm3PEtDuPG8qx9oFsFctPg0S5zb8g=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"
        integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
        integrity="sha256-GqiEX9BuR1rv5zPU5Vs2qS/NSHl1BJyBcjQYJ6ycwD4=" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/animation.css">

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-bar"></div>
        <div id="loading-percentage">0%</div>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="container text-center my-5" style="display: none;">
        <h1 class="display-4" data-aos="fade-down">Undangan Iftar Ramadhan</h1>
        <div class="mt-4" data-aos="fade-up" data-aos-delay="400">
            <img src="assets/img/logo-creavill.png" alt="Logo Creavill" class="logo">
        </div>
        <p class="lead" data-aos="fade-up" data-aos-delay="200">Kepada Keluarga Besar Creavill Bandung</p>
        <p data-aos="fade-up" data-aos-delay="400">Kami mengundang Anda untuk menghadiri acara buka puasa bersama dalam
            rangka menyambut bulan suci Ramadhan.</p>
        <!-- <p data-aos="fade-up" data-aos-delay="600">Acara akan diselenggarakan pada:</p>
        <p data-aos="fade-up" data-aos-delay="800"><strong>Hari/Tanggal:</strong> Sabtu, 25 Maret 2023</p>
        <p data-aos="fade-up" data-aos-delay="1000"><strong>Waktu:</strong> 17.30 - Selesai</p>
        <p data-aos="fade-up" data-aos-delay="1200"><strong>Tempat:</strong> Ruang Serbaguna Creavill</p> -->
        <button class="btn btn-primary mt-3" data-aos="fade-up" data-aos-delay="1400" onclick="openInvitation()">
            <i class="fas fa-envelope-open"></i> Buka Undangan
        </button>
    </main>
    <!-- Second Page (After Opening Invitation) -->
    <section id="second-page" style="display: none;">

        <section id="home" class="section-content" data-aos="fade-up"
            style="background-image: url('assets/img/Foto1.jpg'); background-size: cover; background-position: center; position: relative;">
            <div class="overlay"></div>
            <div class="container text-center">
                <div class="card card-custom">
                    <div class="card-body">
                        <h1 class="display-4">Acara Buka Puasa Bersama</h1>
                        <div class="mt-4" data-aos="fade-up" data-aos-delay="400">
                            <img src="assets/img/logo-creavill.png" alt="Logo Creavill" class="logo">
                        </div>
                        <p class="lead">Mari kita bersama-sama menyambut bulan suci Ramadhan dengan penuh kebahagiaan.
                        </p>
                        <p><strong>Yuk Konfirmasi Terlebih Dahulu Sebelum Lupa!:)</strong></p>
                        <p><strong>Catat Dan Save Waktunya Biar Gak Lupa!:)</strong></p>
                        <button class="btn btn-custom mt-3" onclick="saveToCalendar()">
                            <i class="fas fa-calendar-plus"></i> Save to Google Calendar
                        </button>
                        <a href="https://bit.ly/Konfirmasi_Kehadiran_Iftar_CreavillBdg"><button
                                class="btn btn-custom mt-3">
                                <i class="fas fa-link"></i> Hadir Iftar Yuk!(Konfirmasi)
                            </button></a>

                    </div>
                </div>
            </div>
        </section>

        <!-- Section 1: Quotes -->
        <section id="quotes" class="section-content" data-aos="fade-up">
            <div class="container text-center position-relative">
                <svg class="section-icon" data-aos="fade-right" data-aos-delay="200" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24" width="100" height="100">
                    <path
                        d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"
                        fill="#FFD700" />
                </svg>
                <blockquote class="blockquote">
                    <p class="mb-0" style="font-size: 1.5em;">إنَّ الصَّومَ جُنَّةٌ</p>
                    <footer class="blockquote-footer">“Puasa adalah perisai.”</footer>
                </blockquote>
            </div>
        </section>

        <!-- Section 2: Dresscode -->
        <section id="dresscode" class="section-content" data-aos="fade-up">
            <div class="container text-center position-relative">
                <h1 class="display-4">Dresscode</h1>

                <div class="card dresscode-card" data-aos="fade-right">
                    <div class="card-body">
                        <img src="assets/img/clothing-icon.png" alt="Dresscode" class="dresscode-icon">
                        <div class="mt-3">
                            <p class="lead">Warna: Nuansa Putih</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Tanggal -->
        <section id="tanggal" class="section-content" data-aos="fade-up">
            <<div class="container text-center position-relative">
                <h1 class="display-4">Countdown</h1>
                <div id="countdown" class="countdown" data-aos="fade-left">
                    <div class="countdown-item">
                        <span id="days">00</span>
                        <span>Hari</span>
                    </div>
                    <div class="countdown-item">
                        <span id="hours">00</span>
                        <span>Jam</span>
                    </div>
                    <div class="countdown-item">
                        <span id="minutes">00</span>
                        <span>Menit</span>
                    </div>
                    <div class="countdown-item">
                        <span id="seconds">00</span>
                        <span>Detik</span>
                    </div>
                </div>
                <!-- Konten lainnya seperti Google Maps, dll -->
                <p class="lead"><strong>Acara akan dimulai pada:</strong></p>
                <p class="lead"><strong>Hari:</strong> Sabtu, 15 Maret 2025</p>
                <p class="lead"><strong>Waktu:</strong> 17.00 - Selesai</p>
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3960.769808844662!2d107.61428677499642!3d-6.918100393081511!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e68e76126ec9dbb%3A0x57e2c0cac6bb88de!2sKedai%20Kopi%20Ambara%20Biru!5e0!3m2!1sen!2sid!4v1741290378806!5m2!1sen!2sid"
                    width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                <a href="https://maps.app.goo.gl/Dz4mrxctdRuj9UoY6" class="btn btn-secondary mt-2"
                    style="display: inline-block;">
                    <i class="fas fa-map"></i> Lihat Google Maps
                </a>
                <p class="mt-2">Kedai Kopi Ambara Biru, Jl. Panaitan No.33, Kb. Pisang, Kec. Sumur Bandung, Kota
                    Bandung, Jawa Barat 40112</p>
                </div>
                </div>
        </section>
        <!-- Section 4: Galeri -->
        <section id="galeri" class="section-content" data-aos="fade-up">
            <div class="container text-center">
                <div class="gallery-box"> <!-- Box untuk Galeri -->
                    <h1 class="display-4">Galeri</h1>
                    <div class="row justify-content-center">
                        <!-- Card Kecil 1 -->
                        <div class="col-12 col-md-6 col-lg-4 mb-4" data-aos="zoom-in">
                            <div class="card h-100"> <!-- Card untuk Foto 1 -->
                                <img src="./assets/img/Foto1.jpg" alt="Foto 1"
                                    class="card-img-top img-fluid landscape">
                            </div>
                        </div>
                        <!-- Card Kecil 2 -->
                        <div class="col-12 col-md-6 col-lg-4 mb-4" data-aos="zoom-in-up">
                            <div class="card h-100"> <!-- Card untuk Foto 2 -->
                                <img src="./assets/img/Foto2.jpg" alt="Foto 2"
                                    class="card-img-top img-fluid landscape">
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-4 mb-4" data-aos="zoom-in-down">
                            <div class="card h-100"> <!-- Card untuk Foto 3 -->
                                <img src="./assets/img/Foto3.jpg" alt="Foto 3"
                                    class="card-img-top img-fluid landscape">
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-4 mb-4" data-aos="zoom-in-left">
                            <div class="card h-100"> <!-- Card untuk Foto 4 -->
                                <img src="./assets/img/Foto4.jpg" alt="Foto 4"
                                    class="card-img-top img-fluid landscape">
                            </div>
                        </div>
                        <!-- Tambahkan lebih banyak card sesuai kebutuhan -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Forum Diskusi -->
        <section id="forum" class="section-content" data-aos="fade-up">
            <div class="container text-center">
                <div class="forum-box">
                    <h1 class="display-4">Forum Diskusi</h1>
                    <div class="row justify-content-center">
                        <div class="col-lg-8 col-12">
                            <form id="presensi-form" class="mb-4">
                                <div class="form-group mb-3">
                                    <label for="nama" class="d-flex align-items-center">
                                        <i class="fas fa-user me-2"></i> Nama Anda
                                    </label>
                                    <input type="text" id="nama" class="form-control" placeholder="Nama Anda" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="presensi" class="d-flex align-items-center">
                                        <i class="fas fa-check-circle me-2"></i> Pilih Presensi
                                    </label>
                                    <select id="presensi" class="form-control" required>
                                        <option value="">Pilih Presensi</option>
                                        <option value="hadir">Hadir</option>
                                        <option value="tidak-hadir">Tidak Hadir</option>
                                    </select>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="komentar" class="d-flex align-items-center">
                                        <i class="fas fa-comment me-2"></i> Hayu Komen
                                    </label>
                                    <textarea id="komentar" class="form-control" placeholder="Komentar Anda" rows="3"
                                        required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-paper-plane"></i> Kirim
                                </button>
                            </form>
                        </div>
                    </div>
                    <!-- Tombol WhatsApp -->
                    <div class="mt-4" data-aos="fade-up" data-aos-delay="200">
                        <label for="nama" class="label-center">
                            Jika ada yang ingin bertanya hubungi kami ya!
                        </label>
                        <a href="https://wa.me/+62881023093590" class="btn btn-custom-contact me-2" target="_blank">
                            <i class="fab fa-whatsapp me-2"></i> Tasnita
                        </a>
                        <a href="https://wa.me/+6285950315990" class="btn btn-custom-contact" target="_blank">
                            <i class="fab fa-whatsapp me-2"></i> Sajidah
                        </a>
                    </div>
                </div>
                <div id="komentar-list" class="mt-4">
                    <!-- Komentar akan ditampilkan di sini secara dinamis -->
                </div>
                <div class="pagination mt-3 text-center">
                    <button id="prev" class="btn btn-secondary mx-2"><i class="fas fa-chevron-left"></i> Prev</button>
                    <button id="next" class="btn btn-secondary mx-2">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer" data-aos="fade-up">
            <div class="container text-center">
                <p class="lead">“Ramadhan adalah bulan yang penuh berkah, mari kita sambut dengan penuh rasa syukur.”
                </p>
                <p>Jangan lupa hadir, ditunggu kedatangannya!</p>
            </div>
        </footer>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#home" class="nav-item active"><i class="fas fa-home"></i> Home</a>
            <a href="#dresscode" class="nav-item"><i class="fas fa-tshirt"></i> Dresscode</a>
            <a href="#tanggal" class="nav-item"><i class="fas fa-calendar-alt"></i> Tanggal</a>
            <a href="#galeri" class="nav-item"><i class="fas fa-images"></i> Galeri</a>
            <a href="#forum" class="nav-item"><i class="fas fa-comments"></i> Forum</a>
        </nav>

        <!-- Music Player and Dark Mode Toggle -->
        <div class="control-box">
            <div class="music-player">
                <audio id="background-music" src="./assets/music/ramadhan.mp3" loop></audio>
                <button id="music-toggle" class="btn btn-circle">
                    <i class="fas fa-play"></i>
                </button>
            </div>
            <div class="dark-mode-toggle">
                <button id="dark-mode-toggle" class="btn btn-circle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>

        <!-- Dependencies JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js"></script>

        <script type="module">
            // Impor modul Firebase yang diperlukan
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
            import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

            // Konfigurasi Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyBxoVyCyC6edgTPVvDyVr8O3L7ZLD0kQYQ",
                authDomain: "iftarcreavill.firebaseapp.com",
                databaseURL: "https://iftarcreavill-default-rtdb.asia-southeast1.firebasedatabase.app/",
                projectId: "iftarcreavill",
                storageBucket: "iftarcreavill.firebasestorage.app",
                messagingSenderId: "262613636579",
                appId: "1:262613636579:web:e055252ad657b335cabcd6",
                measurementId: "G-PWF1WXW4Z2"
            };

            // Inisialisasi Firebase
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app); // Inisialisasi Firebase Realtime Database

            // Variabel global untuk pagination
            let currentPage = 1;
            const commentsPerPage = 5; // Jumlah komentar per halaman
            let komentarList = []; // Menyimpan daftar komentar

            // Initialize AOS
            AOS.init();

            // Loading Screen
            let percentage = 0;
            const loadingInterval = setInterval(() => {
                percentage += 1;
                document.getElementById('loading-percentage').textContent = `${percentage}%`;
                document.querySelector('.loading-bar').style.width = `${percentage}%`;
                if (percentage >= 100) {
                    clearInterval(loadingInterval);
                    document.getElementById('loading-screen').style.opacity = '0';
                    document.getElementById('loading-screen').style.transition = 'opacity 1s ease';
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                        document.getElementById('main-content').style.display = 'block';
                        document.getElementById('main-content').style.opacity = '1';
                    }, 1000);
                }
            }, 30);

            // Fungsi untuk membuka undangan
            window.openInvitation = function () {
                console.log("Tombol Buka Undangan diklik!");
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    shapes: ['star'],
                    colors: ['FFE400', 'FFBD00', 'E89400', 'FFCA6C', 'FDFFB8']
                });

                setTimeout(() => {
                    document.getElementById('main-content').style.display = 'none';
                    document.getElementById('second-page').style.display = 'block';
                    document.getElementById('second-page').style.opacity = '1';

                    // Auto-play music
                    const music = document.getElementById('background-music');
                    music.play();

                    // Music toggle button
                    const musicToggle = document.getElementById('music-toggle');
                    musicToggle.addEventListener('click', () => {
                        if (music.paused) {
                            music.play();
                            musicToggle.innerHTML = '<i class="fas fa-pause"></i>';
                        } else {
                            music.pause();
                            musicToggle.innerHTML = '<i class="fas fa-play"></i>';
                        }
                    });

                    // Dark mode toggle
                    const darkModeToggle = document.getElementById('dark-mode-toggle');
                    darkModeToggle.addEventListener('click', () => {
                        document.body.classList.toggle('dark-mode');
                        if (document.body.classList.contains('dark-mode')) {
                            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                        } else {
                            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                        }
                    });
                }, 2000);
            };

            // Save to Google Calendar
            window.saveToCalendar = function () {
                const eventTitle = "Acara Buka Puasa Bersama";
                const eventDate = "20250315T100000Z"; // 15 Maret 2025, 17:30 WIB (10:30 UTC)
                const eventEndDate = "20250315T140000Z"; // 15 Maret 2025, 21:00 WIB (UTC+7)
                const eventLocation = "Kedai Kopi Ambara Biru";
                const eventDetails = "Acara buka puasa bersama dalam rangka menyambut bulan suci Ramadhan bersama Creavill Bandung.";

                const googleCalendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&dates=${eventDate}/${eventEndDate}&details=${encodeURIComponent(eventDetails)}&location=${encodeURIComponent(eventLocation)}`;
                window.open(googleCalendarUrl, '_blank');
            }

            // Countdown Timer
            const countdown = () => {
                const eventDate = new Date('March 15, 2025 17:00:00').getTime();
                const now = new Date().getTime();
                const distance = eventDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = days;
                document.getElementById('hours').innerText = hours;
                document.getElementById('minutes').innerText = minutes;
                document.getElementById('seconds').innerText = seconds;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('countdown').innerHTML = "<h2>Acara Telah Dimulai!</h2>";
                }
            };

            const countdownInterval = setInterval(countdown, 1000);

            // Fungsi untuk menampilkan komentar dengan pagination
            const renderKomentar = (komentarList) => {
                const komentarListElement = document.getElementById('komentar-list');
                komentarListElement.innerHTML = '';

                const startIndex = (currentPage - 1) * commentsPerPage;
                const endIndex = startIndex + commentsPerPage;
                const paginatedKomentar = komentarList.slice(startIndex, endIndex);

                paginatedKomentar.forEach((komentar) => {
                    const komentarItem = document.createElement('div');
                    komentarItem.className = 'komentar-item mb-3 p-3 border rounded';
                    komentarItem.innerHTML = `
                            <p><strong>${komentar.nama}</strong> <span class="presensi">${komentar.presensi === 'hadir' ? '✔' : '<span style="color:red;">✖</span>'}</span></p>
                            <hr class="divider">
                            <p>${komentar.komentar}</p>
                            <small>${komentar.waktu}</small>
                            <button class="btn btn-danger btn-sm mt-2" onclick="deleteComment('${komentar.id}')">Hapus</button>
                        `;
                    komentarListElement.appendChild(komentarItem);
                });

                // Update tombol pagination
                document.getElementById('prev').disabled = currentPage === 1;
                document.getElementById('next').disabled = endIndex >= komentarList.length;
            };

            // Event listener untuk form presensi
            document.getElementById('presensi-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const nama = document.getElementById('nama').value;
                const presensi = document.getElementById('presensi').value;
                const komentar = document.getElementById('komentar').value;
                const waktu = new Date().toLocaleString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                });

                const newComment = { nama, presensi, komentar, waktu };

                // Simpan komentar ke Firebase
                const commentsRef = ref(database, 'komentar');
                push(commentsRef, newComment)
                    .then(() => {
                        console.log("Komentar berhasil disimpan!");
                    })
                    .catch((error) => {
                        console.error("Gagal menyimpan komentar: ", error);
                    });

                document.getElementById('presensi-form').reset();
            });

            // Event listener untuk tombol pagination
            document.getElementById('prev').addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderKomentar(komentarList);
                }
            });

            document.getElementById('next').addEventListener('click', () => {
                const totalPages = Math.ceil(komentarList.length / commentsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderKomentar(komentarList);
                }
            });

            // Ambil komentar dari Firebase secara realtime
            const commentsRef = ref(database, 'komentar');
            onValue(commentsRef, (snapshot) => {
                komentarList = []; // Reset komentarList setiap kali data diambil
                snapshot.forEach((childSnapshot) => {
                    const komentar = childSnapshot.val();
                    komentar.id = childSnapshot.key;
                    komentarList.push(komentar);
                });
                renderKomentar(komentarList); // Render komentar setelah data diambil
            });

            // Fungsi untuk menghapus komentar
            window.deleteComment = (id) => {
                const commentRef = ref(database, `komentar/${id}`);
                remove(commentRef)
                    .then(() => {
                        console.log("Komentar berhasil dihapus!");
                    })
                    .catch((error) => {
                        console.error("Gagal menghapus komentar: ", error);
                    });
            };

            // Navigasi aktif saat scroll
            const sections = document.querySelectorAll('.section-content');
            const navItems = document.querySelectorAll('.nav-item');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (pageYOffset >= sectionTop - sectionHeight / 3) {
                        current = section.getAttribute('id');
                    }
                });

                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('href').includes(current)) {
                        item.classList.add('active');
                    }
                });
            });
        </script>
</body>

</html>
